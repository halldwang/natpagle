<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>简介 | JavaScript中的函数式编程</title>
    <meta name="description" content="JavaScript 中的函数式编程">
    
    
    <link rel="preload" href="/natpagle/assets/css/0.styles.704ec6d9.css" as="style"><link rel="preload" href="/natpagle/assets/js/app.b21d4d52.js" as="script"><link rel="preload" href="/natpagle/assets/js/2.793adf42.js" as="script"><link rel="preload" href="/natpagle/assets/js/8.de7b36b8.js" as="script"><link rel="prefetch" href="/natpagle/assets/js/10.bb99e574.js"><link rel="prefetch" href="/natpagle/assets/js/11.8cce9fd8.js"><link rel="prefetch" href="/natpagle/assets/js/12.f3ea115a.js"><link rel="prefetch" href="/natpagle/assets/js/13.fe574bc4.js"><link rel="prefetch" href="/natpagle/assets/js/14.752b3757.js"><link rel="prefetch" href="/natpagle/assets/js/15.6a578eca.js"><link rel="prefetch" href="/natpagle/assets/js/16.44463992.js"><link rel="prefetch" href="/natpagle/assets/js/3.1f46a39d.js"><link rel="prefetch" href="/natpagle/assets/js/4.832153c4.js"><link rel="prefetch" href="/natpagle/assets/js/5.d5389a0e.js"><link rel="prefetch" href="/natpagle/assets/js/6.4fa878bd.js"><link rel="prefetch" href="/natpagle/assets/js/7.e166f63b.js"><link rel="prefetch" href="/natpagle/assets/js/9.d3b39cee.js">
    <link rel="stylesheet" href="/natpagle/assets/css/0.styles.704ec6d9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/natpagle/" class="home-link router-link-active"><!----> <span class="site-name">JavaScript中的函数式编程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/natpagle/" class="nav-link">首页</a></div><div class="nav-item"><a href="/natpagle/book/cover-preface.html" class="nav-link">章节</a></div><div class="nav-item"><a href="/natpagle/book/contribution.html" class="nav-link">贡献内容</a></div> <a href="https://github.com/halldwang/natpagle" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/natpagle/" class="nav-link">首页</a></div><div class="nav-item"><a href="/natpagle/book/cover-preface.html" class="nav-link">章节</a></div><div class="nav-item"><a href="/natpagle/book/contribution.html" class="nav-link">贡献内容</a></div> <a href="https://github.com/halldwang/natpagle" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/natpagle/book/cover-preface.html" class="sidebar-link">章节和目录</a></li><li><a href="/natpagle/book/chapter-first.html" class="active sidebar-link">第一章：通过一个案例了解JavaScript语言能力</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/natpagle/book/chapter-first.html#案例" class="sidebar-link">案例</a></li><li class="sidebar-sub-header"><a href="/natpagle/book/chapter-first.html#应用" class="sidebar-link">应用</a></li><li class="sidebar-sub-header"><a href="/natpagle/book/chapter-first.html#实现方法" class="sidebar-link">实现方法</a></li><li class="sidebar-sub-header"><a href="/natpagle/book/chapter-first.html#函数式编程" class="sidebar-link">函数式编程</a></li><li class="sidebar-sub-header"><a href="/natpagle/book/chapter-first.html#小结" class="sidebar-link">小结</a></li></ul></li><li><a href="/natpagle/book/chapter-second.html" class="sidebar-link">第二章：函数式编程基础</a></li><li><a href="/natpagle/book/chapter-third.html" class="sidebar-link">第三章：搭建函数式编程环境</a></li><li><a href="/natpagle/book/chapter-fourth.html" class="sidebar-link">第四章：JavaScript中的函数式编程实现</a></li><li><a href="/natpagle/book/chapter-fifth.html" class="sidebar-link">第五章：理论范畴</a></li><li><a href="/natpagle/book/chapter-sixth.html" class="sidebar-link">第六章：JavaScript中的高级函数和陷阱话题</a></li><li><a href="/natpagle/book/chapter-seventh.html" class="sidebar-link">第七章：JavaScript中的函数式和面向对象编程</a></li><li><a href="/natpagle/book/appendix.html" class="sidebar-link">附录：JavaScript中常用函数的函数式方法</a></li><li><a href="/natpagle/book/contribution.html" class="sidebar-link">贡献内容</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h1> <p>几十年来，函数式编程一直是计算机科学爱好者的推崇，因其数学上的纯洁性和令人费解等特性而倍受推崇，正因为这些特性使函数式编程一直隐藏在数据科学家和博士生计算机实验室中。但现在，它正在经历一次复苏，感谢现代语言，如Python、Julia、Ruby、Clojure和JavaScipt。</p> <blockquote><p>您说的是JavaScript吗？ web脚本语言？（答案是）是!</p></blockquote> <p>事实证明，JavaScript是一项重要的编程技术，并且很长时间内不会消失。 这在很大程度上是由于它具有旺盛的扩展新框架和库的能力，例如backbone.js，jQuery，Dojo，underscore.js等。 这与JavaScript作为功能性编程语言的特性相关。 往长期去看，对于各种语言技能的程序员来说，使用JavaScript进行函数式编程对提高编程能力是非常有好处的。</p> <p>为什么？ 函数式编程功能强大，健壮且优雅。 它在大型数据结构上非常有用且高效。 使用JavaScript作为客户端语言，去操作DOM，对API响应进行排序或在复杂的网站上执行其他任务或实现功能，实现起来容易。</p> <p>在本书中，您将学到使用JavaScript编程的相关知识：</p> <ul><li>如何使用函数式编程，如何解锁JavaScript的编程能力。</li> <li>如何编写更好的代码，功能健壮且易于维护，下载速度更快，内存开销少。</li> <li>学习函数式编程的核心概念，如何将特性应用于JavaScript。</li> <li>如何避开使用JavaScript作为函数语言时可能出现的警告和问题。</li> <li>如何在JavaScript开发中使用函数式编程和面向对象编程思想。</li></ul> <p>但在开始之前，我们先做个实验。</p> <h2 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h2> <p>案例可能是介绍特性的最佳方法，基于JavaScript编程，比较传统的编程方法和使用函数式编程实现相同功能。</p> <h2 id="应用"><a href="#应用" class="header-anchor">#</a> 应用</h2> <p>应用是一个通过运算咖啡种类和大小（杯）不同，产生不同价格的示例。</p> <h2 id="实现方法"><a href="#实现方法" class="header-anchor">#</a> 实现方法</h2> <p>首先，我们看下整个过程。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建对象存储数据.</span>
<span class="token keyword">var</span> columbian <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;columbian&quot;</span><span class="token punctuation">,</span>
  basePrice<span class="token punctuation">:</span> <span class="token number">5</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> frenchRoast <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;french roast&quot;</span><span class="token punctuation">,</span>
  basePrice<span class="token punctuation">:</span> <span class="token number">8</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> decaf <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;decaf&quot;</span><span class="token punctuation">,</span>
  basePrice<span class="token punctuation">:</span> <span class="token number">6</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 实现一个计算器方法计算成本</span>
<span class="token comment">// 根据大小显示在页面list上</span>
<span class="token keyword">function</span> <span class="token function">printPrice</span><span class="token punctuation">(</span><span class="token parameter">coffee<span class="token punctuation">,</span> size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">==</span> <span class="token string">&quot;small&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> price <span class="token operator">=</span> coffee<span class="token punctuation">.</span>basePrice <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">==</span> <span class="token string">&quot;medium&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> price <span class="token operator">=</span> coffee<span class="token punctuation">.</span>basePrice <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> price <span class="token operator">=</span> coffee<span class="token punctuation">.</span>basePrice <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// create the new html list item</span>
  <span class="token keyword">var</span> node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> label <span class="token operator">=</span> coffee<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> size<span class="token punctuation">;</span>
  <span class="token keyword">var</span> textnode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>label <span class="token operator">+</span> <span class="token string">&quot; price: $&quot;</span> <span class="token operator">+</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span>
  node<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>textnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;products&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// now all we need to do is call the printPrice function</span>
<span class="token comment">// for every single combination of coffee type and size</span>
<span class="token function">printPrice</span><span class="token punctuation">(</span>columbian<span class="token punctuation">,</span> <span class="token string">&quot;small&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printPrice</span><span class="token punctuation">(</span>columbian<span class="token punctuation">,</span> <span class="token string">&quot;medium&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printPrice</span><span class="token punctuation">(</span>columbian<span class="token punctuation">,</span> <span class="token string">&quot;large&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printPrice</span><span class="token punctuation">(</span>frenchRoast<span class="token punctuation">,</span> <span class="token string">&quot;small&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printPrice</span><span class="token punctuation">(</span>frenchRoast<span class="token punctuation">,</span> <span class="token string">&quot;medium&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printPrice</span><span class="token punctuation">(</span>frenchRoast<span class="token punctuation">,</span> <span class="token string">&quot;large&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printPrice</span><span class="token punctuation">(</span>decaf<span class="token punctuation">,</span> <span class="token string">&quot;small&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printPrice</span><span class="token punctuation">(</span>decaf<span class="token punctuation">,</span> <span class="token string">&quot;medium&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printPrice</span><span class="token punctuation">(</span>decaf<span class="token punctuation">,</span> <span class="token string">&quot;large&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 输出 =&gt;</span>
columbian small price<span class="token punctuation">:</span> $<span class="token number">7</span>
columbian medium price<span class="token punctuation">:</span> $<span class="token number">9</span>
columbian large price<span class="token punctuation">:</span> $<span class="token number">11</span>
french roast small price<span class="token punctuation">:</span> $<span class="token number">10</span>
french roast medium price<span class="token punctuation">:</span> $<span class="token number">12</span>
french roast large price<span class="token punctuation">:</span> $<span class="token number">14</span>
decaf small price<span class="token punctuation">:</span> $<span class="token number">8</span>
decaf medium price<span class="token punctuation">:</span> $<span class="token number">10</span>
decaf large price<span class="token punctuation">:</span> $<span class="token number">12</span>
</code></pre></div><p>如上所见，此代码非常基础。 如果有比我们这里的三种咖啡更多的咖啡种类，该怎么办？ 如果有20、50个怎么办， 如果除了大小（杯）之外，加上有机和非有区别，那该怎么办？ 代码按照这样写下去，代码行会越来越多！使用以上方法，我们告诉咖啡机每种咖啡类型和尺寸的打印内容。 从根本上讲，这需要函数式编程解决问题所在。</p> <h2 id="函数式编程"><a href="#函数式编程" class="header-anchor">#</a> 函数式编程</h2> <p>功能编程（命令式代码）一步一步地告诉机器它需要做什么来解决问题，而函数式编程则试图用数学方法来描述问题，以便机器可以完成其余的工作。</p> <p>使用更实用的方法，可以按如下方式编写相同的方法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// separate the data and logic from the interface</span>
<span class="token keyword">var</span> <span class="token function-variable function">printPrice</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">price<span class="token punctuation">,</span> label</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> textnode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>label <span class="token operator">+</span> <span class="token string">&quot; price: $&quot;</span> <span class="token operator">+</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span>
  node<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>textnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;products 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// create function objects for each type of coffee</span>
<span class="token keyword">var</span> <span class="token function-variable function">columbian</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;columbian&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>basePrice <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">frenchRoast</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;french roast&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>basePrice <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">decaf</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;decaf&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>basePrice <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// create object literals for the different sizes</span>
<span class="token keyword">var</span> small <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getPrice</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>basePrice <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getLabel</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; small&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> medium <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getPrice</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>basePrice <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getLabel</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; medium&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> large <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getPrice</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>basePrice <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getLabel</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; large&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// put all the coffee types and sizes into arrays</span>
<span class="token keyword">var</span> coffeeTypes <span class="token operator">=</span> <span class="token punctuation">[</span>columbian<span class="token punctuation">,</span> frenchRoast<span class="token punctuation">,</span> decaf<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> coffeeSizes <span class="token operator">=</span> <span class="token punctuation">[</span>small<span class="token punctuation">,</span> medium<span class="token punctuation">,</span> large<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// build new objects that are combinations of the above</span>
<span class="token comment">// and put them into a new array</span>
<span class="token keyword">var</span> coffees <span class="token operator">=</span> coffeeTypes<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">previous<span class="token punctuation">,</span> current</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> newCoffee <span class="token operator">=</span> coffeeSizes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">mixin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// `plusmix` function for functional mixins, see Ch.7</span>
    <span class="token keyword">var</span> newCoffeeObj <span class="token operator">=</span> <span class="token function">plusMixin</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> mixin<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">newCoffeeObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> previous<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>newCoffee<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// we've now defined how to get the price and label for each</span>
<span class="token comment">// coffee type and size combination, now we can just print them</span>
coffees<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">coffee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">printPrice</span><span class="token punctuation">(</span>coffee<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> coffee<span class="token punctuation">.</span><span class="token function">getLabel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>首先应该清楚的是，它更模块化。这使得添加新大小（杯）或新咖啡类型变得简单，如下面的代码片段所示：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">peruvian</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;peruvian&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>basePrice <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> extraLarge <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getPrice</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>basePrice <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getLabel</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; extra large&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
coffeeTypes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Peruvian<span class="token punctuation">)</span><span class="token punctuation">;</span>
coffeeSizes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>extraLarge<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>咖啡对象数组和大小（杯）对象数组通过一个名为plusMixin的自定义函数“mixed”在一起，即它们的方法和成员变量组合在一起（请参见第7章，JavaScript中的面向函数和面向对象的编程）。</p> <p>咖啡类型类包含成员变量，尺寸包含用于计算名称和价格的方法。 “mixing”发生在映射操作中，该操作将纯函数应用于数组中的每个元素，并在reduce()操作内部返回一个新函数，这是另一个类似于映射函数的高阶函数，只是其中的所有元素,数组合并为一个。</p> <p>最后，使用forEach()方法迭代所有类型和大小的所有可能组合的新数组。forEach()方法是另一个高阶函数，它将回调函数应用于数组中的每个对象。 在上面示例中，我们将其作为匿名函数，该函数实例化对象并使用对象的getPrice()和getLabel()方法作为参数来调用printPrice()函数。</p> <p>另外，通过删除coffee变量并将函数连接在一起，我们可以使这个示例更加实用，这是函数式编程中的另一个小技巧。</p> <div class="language-js extra-class"><pre class="language-js"><code>coffeeTypes
  <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">previous<span class="token punctuation">,</span> current</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> newCoffee <span class="token operator">=</span> coffeeSizes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">mixin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// `plusMixin` function for functional mixins, see Ch.7</span>
      <span class="token keyword">var</span> newCoffeeObj <span class="token operator">=</span> <span class="token function">plusMixin</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> mixin<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">newCoffeeObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> previous<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>newCoffee<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">coffee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printPrice</span><span class="token punctuation">(</span>coffee<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> coffee<span class="token punctuation">.</span><span class="token function">getLabel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>另外，函数式编程控制流并不像命令式代码那样自上而下。在函数式编程中，map()函数和其他高阶函数代替for和while循环，对执行顺序的关注程度很低。这使得新进入范例的人阅读代码变得有点棘手，但是，一旦你掌握了它的窍门，就不难理解了，你会发现它要好得多。</p> <p>这个案例几乎没有涉及到函数式编程在JavaScript中能做什么，在这本书中，你将看到更强大的函数式编程方法的案例。</p> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <p>首先，函数式编程的好处显而易见（函数一等公民）。</p> <p>其次，不要惧怕函数式编程。 虽然它通常被视为人们通常认为纯逻辑的计算机语言形式，但是我们不需要了解λ演算（Lambda calculus）就可以将它应用于日常工作中。 实际上它的实现过程是我们将这些逻辑拆分为较小的部分，这样更易于理解，更易于维护且更可靠。 map()和reduce()函数是JavaScript中的内置函数，本书将进行详解。</p> <p>JavaScript是一种脚本语言，具有交互性且易于使用，并且无需编译。 我们甚至不需要下载任何开发软件，浏览器就可以充当解释器和开发环境。</p> <p>大家有兴趣吗，让我们开始学习吧！</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/halldwang/natpagle/edit/master/docs/book/chapter-first.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">12/18/2019, 5:56:44 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/natpagle/book/cover-preface.html" class="prev">章节和目录</a></span> <span class="next"><a href="/natpagle/book/chapter-second.html">第二章：函数式编程基础</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/natpagle/assets/js/app.b21d4d52.js" defer></script><script src="/natpagle/assets/js/2.793adf42.js" defer></script><script src="/natpagle/assets/js/8.de7b36b8.js" defer></script>
    <script type="text/javascript">
     var _mtac = {};
     (function() {
       var mta = document.createElement("script");
       mta.src = "//pingjs.qq.com/h5/stats.js?v2.0.4";
       mta.setAttribute("name", "MTAH5");
       mta.setAttribute("sid", "500706003");
       var s = document.getElementsByTagName("script")[0];
       s.parentNode.insertBefore(mta, s);
     })();
    </script>
  </body>
</html>
